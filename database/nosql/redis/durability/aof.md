# AOF
AOF 原理

redis命令 ⇒ 写缓冲区 ⇒ 刷到硬盘（AOF）文件

1. fork子进程
2. 父进程继续处理client请求，子进程把AOF内容写入缓冲区
3. 子进程写完退出，父进程收到，将缓冲区内容追加写入到临时文件
4. 临时文件重命名成appendonlyfile.aof

### AOF 三种策略

always 每条命令刷新（不丢失数据、IO开销大）

everysec 每秒刷新（每秒一次刷新，可能丢失1秒的数据）（默认）

no 操作系统决定什么时候开始刷（不可控）
